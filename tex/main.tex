\documentclass[12pt,a4paper,parskip=full]{scrreprt}
\usepackage{cite}
\usepackage[pdftex]{graphicx}
\graphicspath{{graphics/}}

\usepackage[cmex10]{amsmath}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{tocloft}

\usepackage{url}

\usepackage{makeidx}
\usepackage[colorlinks,hyperindex,plainpages=false,
pdftitle={High-frequency characterization of a Software Defined Radio (SDR) platform},
pdfauthor={Gernot Vormayr},
pdfsubject={Bachelor thesis},
pdfkeywords={Hochfrequenz,Software Defined Radio,SDR,GNU Radio,USRP},
pdfpagelabels,
pagebackref,
bookmarksopen=false
]{hyperref}

\usepackage{cleveref}

\usepackage{siunitx}
\usepackage{pgfplots}

\pgfplotsset{compat=1.11}
\pgfplotsset{every axis plot/.append style={smooth}} 

\usepgfplotslibrary{units}
\pgfplotsset{unit code/.code 2 args={\si{#1#2}}}

\usepgfplotslibrary{external}
\tikzexternalize
\tikzsetexternalprefix{figures/}

\DeclareSIUnit \belm {Bm}

\begin{document}
\begin{titlepage}
    \enlargethispage{1cm}
    \centering
    \begin{minipage}{0.49\textwidth}
        \includegraphics[height=1.5cm,keepaspectratio]{EMCE_Logo_CMYK_color}
    \end{minipage}
    \begin{minipage}{0.49\textwidth}
        \flushright
        \includegraphics[height=1.5cm,keepaspectratio]{TULogo_CMYK}
    \end{minipage}\\
    \vspace*{5cm}
    {\Huge \textbf{Bachelor thesis}}\\
    \vspace*{1cm}
    {\Large High-frequency characterization of a Software Defined Radio (SDR) platform}

    \vspace*{2cm}
    {\large Gernot ~\textsc{Vormayr} ~\\ 0425210 } ~\\ 

    \vfill
    {Supervisor} ~\\\vspace*{0.1cm}
    {Ass.Prof. Dipl.-Ing. Dr.techn. \large Holger ~\textsc{Arthaber}} ~\\
    {Univ.Ass. Dipl.-Ing. Dr.techn. \large Thomas ~\textsc{Faseth}}
    \vspace*{2cm}

    \rule{\textwidth}{0.4pt}
    \begin{minipage}[t]{0.70\textwidth}
        \begin{large}
            EMCE - Institute of Electrodynamics, Microwave and Circuit Engineering
        \end{large}\\
        Vienna University of Technology
    \end{minipage}
    \hspace{1pt}
    \begin{minipage}[t]{0.27\textwidth}
        Gusshausstrasse 25\\
        1040 Vienna\\
        www.emce.tuwien.ac.at
    \end{minipage}
    \vspace*{-3pt}
    \rule{\textwidth}{0.4pt}
    \clearpage
\end{titlepage}

\tableofcontents

\begin{abstract}
    Abstract could be here
\end{abstract}

\chapter{Introduction}
\section{Ettus Research USRP N210}
\section{GNU Radio}
\chapter{Measurement Setup}
\section{GNU Radio}
\section{Matlab}
\section{Meters}
\chapter{Measurement Results}
\section{RF Frequency Response}

\subsection{RX}
\begin{tikzpicture}
    \begin{axis}[
        title=Input power needed for full scale,
        legend pos = outer north east,
        legend style={font=\footnotesize},
        xlabel={gain},
        ylabel={power},
        x unit={\deci\bel},
        y unit={\deci\belm},
        minor tick num = 1
        ]
        \addplot[mark = +] table {data/rf/rx/8/dbm_400};
        \addplot[mark = x] table {data/rf/rx/8/dbm_2400};
        \addplot[mark = asterisk] table {data/rf/rx/8/dbm_4400};
        \legend{\SI{400}{MHz},\SI{2.4}{GHz},\SI{4.4}{GHz}}
    \end{axis}
\end{tikzpicture}


\begin{tikzpicture}
    \begin{axis}[
        title=Input power needed for full scale,
        legend pos = outer north east,
        legend style={font=\footnotesize},
        ylabel={gain},
        xlabel={frequency},
        y unit={\deci\bel},
        x unit={\hertz},
        change x base,
        x SI prefix=giga,
        width=12cm,
        height=5cm,
        scale only axis,
        minor tick num = 1
        ]
        \addplot[mark = +] table {data/rf/rx/8/f_0};
        \addplot[mark = x] table {data/rf/rx/8/f_15};
        \addplot[mark = asterisk] table {data/rf/rx/8/f_30};
        \legend{\SI{0}{dBm},\SI{15}{dBm},\SI{30}{dBm}}
    \end{axis}
\end{tikzpicture}
\subsection{TX}
16dB
\begin{tikzpicture}
    \begin{axis}[
        title={Output power, 0.8fsc},
        legend pos = outer north east,
        legend style={font=\footnotesize},
        ylabel={gain},
        xlabel={frequency},
        y unit={\deci\bel},
        x unit={\hertz},
        change x base,
        x SI prefix=giga,
        width=12cm,
        height=5cm,
        scale only axis,
        minor tick num = 1,
        ymin = -25
        ]
        \addplot[mark = +] table {data/rf/tx/0.8/0.0};
        \addplot[mark = x] table {data/rf/tx/0.8/10.0};
        \addplot[mark = asterisk] table {data/rf/tx/0.8/20.0};
        \addplot[mark = star] table {data/rf/tx/0.8/30.0};
        \addplot[mark = 10-pointed star] table {data/rf/tx/0.8/31.5};
        \legend{\SI{0}{dBm},\SI{10}{dBm},\SI{20}{dBm},\SI{30}{dBm},\SI{31.5}{dBm}}
    \end{axis}
\end{tikzpicture}


\begin{tikzpicture}
    \begin{axis}[
        title={Output power, 1fsc},
        legend pos = outer north east,
        legend style={font=\footnotesize},
        ylabel={gain},
        xlabel={frequency},
        y unit={\deci\bel},
        x unit={\hertz},
        change x base,
        x SI prefix=giga,
        width=12cm,
        height=5cm,
        scale only axis,
        minor tick num = 1,
        ymin = -25
        ]
        \addplot[mark = +] table {data/rf/tx/1.0/0.0};
        \addplot[mark = x] table {data/rf/tx/1.0/10.0};
        \addplot[mark = asterisk] table {data/rf/tx/1.0/20.0};
        \addplot[mark = star] table {data/rf/tx/1.0/30.0};
        \addplot[mark = 10-pointed star] table {data/rf/tx/1.0/31.5};
        \legend{\SI{0}{dBm},\SI{10}{dBm},\SI{20}{dBm},\SI{30}{dBm},\SI{31.5}{dBm}}
    \end{axis}
\end{tikzpicture}

\section{IF Frequency Response}
\subsection{TX}
\begin{tikzpicture}
    \begin{axis}[
        title={IF TX 16 Bit gain 15.0},
        ylabel={if frequency},
        xlabel={rf frequency},
        zlabel={output power},
        xlabel style={sloped},
        ylabel style={sloped},
        x unit={\hertz},
        change x base,
        x SI prefix=giga,
        y unit={\hertz},
        change y base,
        y SI prefix=mega,
        z unit={\deci\belm},
        width=12cm,
        height=5cm,
        scale only axis,
        minor tick num = 1,
        ]
        \addplot3[surf,mesh/cols=41] table {data/if/tx/mesh16_15.0};
    \end{axis}
\end{tikzpicture}

\begin{tikzpicture}
    \begin{axis}[
        title={IF TX gain 15.0 rf 2GHz},
        legend pos = outer north east,
        xlabel={if frequency},
        ylabel={output power},
        x unit={\hertz},
        change x base,
        x SI prefix=mega,
        y unit={\deci\belm},
        width=12cm,
        height=5cm,
        scale only axis,
        minor tick num = 1,
        ]
        \addplot[mark = +] table {data/if/tx/16_2000_15.0};
        \addplot[mark = star] table {data/if/tx/8_2000_15.0};
        \node (rechtsoben) at (axis description cs:1,1) {};
        \legend{16 Bit,8 Bit}
    \end{axis}
    \begin{axis}[
        at={(rechtsoben)},
        anchor=north east,
        scale only axis,
        minor tick num = 1,
        axis background/.style={fill=white},
        tick label style={font=\tiny},
        xmin = -3e6,
        xmax = 3e6,
        ymax = -8.6,
        ymin = -9.8,
        scaled x ticks={base 10:-6},
        xtick scale label code/.code={},
        width = 2cm
        ]
        \addplot[mark = +] table {data/if/tx/16_2000_15.0};
        \addplot[mark = star] table {data/if/tx/8_2000_15.0};
    \end{axis}
\end{tikzpicture}

\section{Intermodulation Properties}
\subsection{RX}
\begin{tikzpicture}
    \begin{axis}[
        title={IP3 RX},
        legend pos = outer north east,
        legend style={font=\footnotesize},
        ylabel={$L_a$},
        xlabel={$L_e$},
        y unit={\deci\bel},
        x unit={\deci\belm},
        width=12cm,
        height=5cm,
        scale only axis,
        minor tick num = 1,
        ]
        \addplot[only marks, mark = +] table {data/ip3/rx/la};
        \addplot[only marks, mark = x] table {data/ip3/rx/im3};
        \addplot[only marks, mark = asterisk] table {data/ip3/rx/pim3};
        \addplot[domain = -62:-8, samples = 201, dotted] {0.9117*x+88.0799};
        \addplot[domain = -62:-8, samples = 201, dotted] {3.0918*x+110.8365};
        \legend{$L_a$,$L_{IM3}$,$IM3$}
    \end{axis}
\end{tikzpicture}
\subsection{TX}
10dB
\begin{tikzpicture}
    \begin{axis}[
        title={IP3 TX},
        legend pos = outer north east,
        legend style={font=\footnotesize},
        ylabel={$L_a$},
        xlabel={$L_e$},
        x unit={\deci\bel},
        y unit={\deci\belm},
        width=12cm,
        height=5cm,
        scale only axis,
        minor tick num = 1,
        ]
        \addplot[only marks, mark = +] table {data/ip3/tx/la};
        \addplot[only marks, mark = x] table {data/ip3/tx/im3};
        \addplot[only marks, mark = asterisk] table {data/ip3/tx/pim3};
        \addplot[domain = -22:13, samples = 201,dotted] {0.9911*x-10.8085};
        \addplot[domain = -22:13, samples = 201,dotted] {3.3325*x-39.1148};
        \legend{$L_a$,$L_{IM3}$,$IM3$}
    \end{axis}
\end{tikzpicture}

tx: 10db dcblock power splitter

\end{document}
